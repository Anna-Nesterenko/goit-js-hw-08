{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAO,CACXC,KAAMC,SAASC,cAAc,mBAGzBC,EAAmB,sBAEnBC,EAAW,IAuBjB,WACE,IAAMC,EAAkBC,aAAaC,QAAQJ,GAE7C,GAAIE,EAAiB,CACnB,IAAMG,EAAkBC,KAAKC,MAAML,GAEnC,IAAK,IAAMM,KAAOH,EAChBJ,EAASO,GAAOH,EAAgBG,GAGlCZ,EAAKC,KAAKY,SAASC,MAAMC,MAAQV,EAASS,MAAQT,EAAgB,MAAI,GAEtEL,EAAKC,KAAKY,SAASG,QAAQD,MAAQV,EAASW,QACxCX,EAAkB,QAClB,IAnCRY,GAEAjB,EAAKC,KAAKiB,iBAAiB,UAG3B,SAAsBC,GACpBA,EAAEC,iBAEFD,EAAEE,cAAcC,QAChB,IAAMC,EAAMhB,aAAaC,QAAQJ,GACjCG,aAAaiB,WAAWpB,GA8BnBC,EAAgB,OAAMA,EAAkB,QAGtCoB,QAAQC,IAAIrB,GAFVsB,MAAM,+BA5BfF,QAAQC,IAAIhB,KAAKC,MAAMY,OAVzBvB,EAAKC,KAAKiB,iBAAiB,QAASU,EAAA9B,EAAA,EAapC,SAAuBqB,GACrBd,EAASc,EAAEU,OAAOC,MAAQX,EAAEU,OAAOd,MACnCR,aAAawB,QAAQ3B,EAAkBM,KAAKsB,UAAU3B,MAfI","sources":["src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst refs = {\n  form: document.querySelector('.feedback-form'),\n};\n\nconst FORM_STORAGE_KEY = 'feedback-form-state';\n\nconst formData = {};\n\npopulateFormFields();\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.form.addEventListener('input', throttle(addFormFields, 500));\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n\n  e.currentTarget.reset();\n  const obj = localStorage.getItem(FORM_STORAGE_KEY);\n  localStorage.removeItem(FORM_STORAGE_KEY);\n  validation();\n\n  console.log(JSON.parse(obj));\n}\n\nfunction addFormFields(e) {\n  formData[e.target.name] = e.target.value;\n  localStorage.setItem(FORM_STORAGE_KEY, JSON.stringify(formData));\n}\n\nfunction populateFormFields() {\n  const formStringValue = localStorage.getItem(FORM_STORAGE_KEY);\n\n  if (formStringValue) {\n    const formObjectValue = JSON.parse(formStringValue);\n\n    for (const key in formObjectValue) {\n      formData[key] = formObjectValue[key];\n    }\n\n    refs.form.elements.email.value = formData.email ? formData['email'] : '';\n\n    refs.form.elements.message.value = formData.message\n      ? formData['message']\n      : '';\n  }\n}\n\nfunction validation() {\n  if (!formData['email'] || !formData['message']) {\n    return alert('Будь ласка, заповніть форму');\n  }\n  return console.log(formData);\n}\n\n// function getStorageData() {\n//   const parcedData = JSON.parse(localStorage.getItem(FORM_STORAGE_KEY));\n//   if (parcedData) {\n//     console.log(parcedData);\n//     setFormFields(parcedData);\n//   }\n// }\n\n// function setFormFields(obj) {\n//   for (const key in obj) {\n//     refs.form[key].value = obj[key];\n//   }\n// }\n\n// window.addEventListener('load', getStorageData);\n"],"names":["$dCfNN","parcelRequire","$b00c40859be242c5$var$refs","form","document","querySelector","$b00c40859be242c5$var$FORM_STORAGE_KEY","$b00c40859be242c5$var$formData","formStringValue","localStorage","getItem","formObjectValue","JSON","parse","key","elements","email","value","message","$b00c40859be242c5$var$populateFormFields","addEventListener","e","preventDefault","currentTarget","reset","obj","removeItem","console","log","alert","$parcel$interopDefault","target","name","setItem","stringify"],"version":3,"file":"03-feedback.47a87924.js.map"}